---
description: Доработали быстрое меню сообщений и добавили возможность копирования
---

# Обновления в сообщениях

Если ранее у пользователя возникала необходимость скопировать сообщение, чтобы отправить его кому-то еще, то для этого ему следовало выделить текст этого сообщения, скопировать этот текст и вставить в новое сообщение в другом чате или мессенджере. Это было не очень удобно, особенно на мобильном устройстве. В связи с этим было решено добавить в меню быстрых действий с сообщением опцию копирования, однако в ходе проработки данного функционала были добавлены еще дополнительные удобные функции.

Было реализовано следующее:

1. При наведении на сообщение в основном чате любого типа отображается меню с быстрыми действиями. Всегда отображаются 4 элемента (добавить реакцию, ответить в обсуждении, цитировать, копировать) + тридот с дополнительными опциями (закрепить, редактировать, удалить) в зависимости от чата и роли (об этом ниже).

<figure><img src="../../.gitbook/assets/image (646).png" alt=""><figcaption></figcaption></figure>

2. При нажатии на “копировать” в меню с быстрыми действиями сообщение будет скопировано в буфер обмена пользователя.
3. В зависимости от роли пользователя тридот с дополнительными опциями при наведении на сообщение в основном чате будет разным:

* Если **любой пользователь** наводит на **свое сообщение в любом чате**, то в тридоте он увидит и сможет: закрепить, редактировать (возможно в течение 4х часов, затем опция пропадает), удалить.
* Если **любой пользователь** наводит на **чужое сообщение в личном чате**, то в тридоте он увидит и сможет только закрепить сообщение.
* Если **пользователь с правами редактирования чата** наводит на **чужое сообщение в групповом чате / чате дисциплины**, то в тридоте он увидит и сможет: закрепить, удалить.
* Если **пользователь без прав редактирования чата** наводит на **чужое сообщение в групповом чате / чате дисциплины**, то ему не будет отображаться тридот, т.к. у него нет дополнительных опций.&#x20;

4. В тредах применили несколько иной подход:

* При нахождении в треде **при наведении на главное сообщение** отображается меню с быстрыми действиями, где всегда присутствуют 4 опции (добавить реакцию, переход к главному сообщению в треде, цитировать, включить/отключить уведомления) + тридот с дополнительными опциями (копировать, редактировать, удалить).
* Опции редактировать и удалить отображаются аналогично тому, как описано в п.3 в зависимости от роли и чата. Опция копировать отображается всем и всегда.
* При нахождении в треде **при наведении на второе и последующие сообщения** мы отображаем меню с быстрыми действиями, где всегда присутствуют 3 опции (добавить реакцию, цитировать, включить/отключить уведомления) + тридот с дополнительными опциями (копировать, редактировать, удалить).
* Опции редактировать и удалить отображаются аналогично тому, как описано в п.3 в зависимости от роли и чата. Опция копировать отображается всем и всегда.

28.07.2023
